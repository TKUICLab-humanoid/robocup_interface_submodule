<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<link rel="SHORTCUT ICON" href="picture/icon.png">

	<!-- CSS References -->
	<link rel="stylesheet" type="text/css" rel="stylesheet" href="./css/style.css">

	<!-- JavaScript References -->
	<script type="text/javascript" src="./js/roslib/eventemitter2.min.js"></script>
	<script type="text/javascript" src="./js/roslib/roslib.min.js"></script>
	<script type="text/javascript" type="text/javascript">

		var ros = new ROSLIB.Ros({
			url: 'ws://localhost:9090'
		});
		ros.on('connection', function () {
			console.log('Connection made!');
			document.getElementById('connected').style.display = 'inline';
		});
		ros.on('error', function (error) {
			console.log('Error connecting to websocket server: ', error);
		});
		ros.on('close', function () {
			console.log('Connection to websocket server closed.');
		});

		var Head_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/package/HeadMotor',
			messageType: 'tku_msgs/HeadPackage'
		});
		var HeadPackagecmd = new ROSLIB.Message({
			ID: 0,
			Position: 511,
			Speed: 1
		});

		var CameraInfoClient = new ROSLIB.Service({
			ros: ros,
			name: '/CameraInfo',
			serviceType: 'tku_msgs/CameraInfo'
		});
		var Camera = new ROSLIB.Topic({
			ros: ros,
			name: '/Camera_Topic',
			messageType: 'tku_msgs/camera'
		});
		var CameraMsg = new ROSLIB.Message({
			brightness: 0.5,
			contrast: 0.5,
			saturation: 0.5,
			white_balance: 0.5,
			auto_white_balance: false,
			auto_exposure: false,
			auto_white_balance: false
		});

		var WebStart_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/web/start',
			messageType: 'std_msgs/Bool'
		});
		var WebStartcmd = new ROSLIB.Message({
			data: false
		});
		var CameraId_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/CameraId',
			messageType: 'std_msgs/Int16'
		});

		var BGRValue_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/BGRValue_Topic',
			messageType: 'tku_msgs/BGRValue'
		});
		
		var BGRClient = new ROSLIB.Service({
			ros: ros,
			name: '/LoadBGRInfo',
			serviceType: 'tku_msgs/BGRInfo'
		});

		var HoughValue_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/HoughValue_Topic',
			messageType: 'tku_msgs/HoughValue'
		});

		var HoughClient = new ROSLIB.Topic({
			ros: ros,
			name: '/LoadHoughInfo',
			messageType: 'tku_msgs/HoughInfo'
		});
		
		var thresholdValuecmd = new ROSLIB.Message({
			BValue: 220,
			GValue: 220,
			RValue: 150
		});

		var HoughValuecmd = new ROSLIB.Message({
			Hough_threshold: 100,
			Hough_minLineLength: 60,
			Hough_maxLineGap: 40
		});

		//-----
		var B_HoughForm_Flag = true;
		var B_SetupCamera_Flag = true;
		var B_Start_Flag = true;
		var B_Measure_Flag = true;
		//-----
		var B_ShowDebugForm_Flag = true;
		var B_Blur_Flag = true;
		var B_ImageGamma_Flag = true;
		var B_Nonbackgroud_image_Flag = true;
		var B_Edge_Flag = true;
		var B_Orihough_Flag = true;
		var B_Merhough_Flag = true;
		var B_Debug_Flag =true;

		var Bluevalue = 0;
		var Greenvalue = 0;
		var Redvalue = 0;
		
		var hough_threshold = 100;

		var CamBrightnessValue = 0;
		var CamContrastValue = 0;
		var CamSaturationValue = 0;
		var CamSharpnessValue = 0;
		var CamWhiteBalanceValue = 0;
		var CamExposureValue = 0;
		var CamAuto_ExposureValue = false;
		var CamAuto_WhiteBalanceValue = false;
		var CamAuto_BacklightCompensation = false;

		//BGR
		function showBlueValue(newValue) {
			document.getElementById("BlueValue").value = newValue;
			Bluevalue = newValue;
			thresholdValuecmd.BValue = Number(Bluevalue);
			BGRValue_Topic.publish(thresholdValuecmd);
		}
		function rangeBlueValue(newValue) {
			document.getElementById("Blue").value = newValue;
			Bluevalue = newValue;
			thresholdValuecmd.BValue = Number(Bluevalue);
			BGRValue_Topic.publish(thresholdValuecmd);
		}
		function showGreenValue(newValue) {
			document.getElementById("GreenValue").value = newValue;
			Greenvalue = newValue;
			thresholdValuecmd.GValue = Number(Greenvalue);
			BGRValue_Topic.publish(thresholdValuecmd);
		}
		function rangeGreenValue(newValue) {
			document.getElementById("Green").value = newValue;
			Greenvalue = newValue;
			thresholdValuecmd.GValue = Number(Greenvalue);
			BGRValue_Topic.publish(thresholdValuecmd);
		}
		function showRedValue(newValue) {
			document.getElementById("RedValue").value = newValue;
			Redvalue = newValue;
			thresholdValuecmd.RValue = Number(Redvalue);
			BGRValue_Topic.publish(thresholdValuecmd);
		}
		function rangeRedValue(newValue) {
			document.getElementById("Red").value = newValue;
			Redvalue = newValue;
			thresholdValuecmd.RValue = Number(Redvalue);
			BGRValue_Topic.publish(thresholdValuecmd);
		}

		//hough
		function showthresholdValue(newValue) {
			document.getElementById("ThresholdValue").value = newValue;
			hough_threshold = newValue;
			HoughValuecmd.Hough_threshold = Number(hough_threshold);
			HoughValue_Topic.publhough_maxLineGapsh(HoughValuecmd);
		}
		function rangethresholdValue(newValue) {
			document.getElementById("Threshold").value = newValue;
			hough_threshold = newValue;
			HoughValuecmd.Hough_threshold = Number(hough_threshold);
			HoughValue_Topic.publish(HoughValuecmd);
		}
		function showminLineLength(newValue)
 		{
			document.getElementById("MinLineLengthValue").value = newValue;
			hough_minLineLength = newValue;
			HoughValuecmd.Hough_minLineLength = Number(hough_minLineLength);
			HoughValue_Topic.publish(HoughValuecmd);
		}
		function rangeminLineLength(newValue) {
			document.getElementById("MinLineLength").value = newValue;
			hough_minLineLength = newValue;
			HoughValuecmd.Hough_minLineLength = Number(hough_minLineLength);
			HoughValue_Topic.publish(HoughValuecmd);
		}
		function showmaxLineGap(newValue) {
			document.getElementById("MaxLineGapValue").value = newValue;
			hough_maxLineGap = newValue;
			HoughValuecmd.Hough_maxLineGap = Number(hough_maxLineGap);
			HoughValue_Topic.publish(HoughValuecmd);
		}
		function rangemaxLineGap(newValue) {
			document.getElementById("MaxLineGap").value = newValue;
			hough_maxLineGap = newValue;
			HoughValuecmd.Hough_maxLineGap = Number(hough_maxLineGap);
			HoughValue_Topic.publish(HoughValuecmd);
		}
				
		function ShowDebugForm()
		{
			if(B_ShowDebugForm_Flag){
				document.getElementById("Debug_Range").style.display = "inline";
				if(B_SetupCamera_Flag){
					document.getElementById("container").style.height = "650px";
				}else
				{
					document.getElementById("container").style.height = "750px";
				}
				B_ShowDebugForm_Flag = false;
			}else
			{
				document.getElementById("Debug_Range").style.display = "none";
				if(B_SetupCamera_Flag){
					document.getElementById("container").style.height = "550px";
				}else
				{
					document.getElementById("container").style.height = "750px";
				}
				B_ShowDebugForm_Flag = true;
			}
		}
		
		function CameraSetUp() {
			if (B_SetupCamera_Flag) {
				document.getElementById("Camera").style.display = "inline";
				document.getElementById("container").style.height = "550px";
				document.getElementById("select").style.height = "400px";
				if(B_ShowDebugForm_Flag){
					document.getElementById("container").style.height = "750px";
				}else
				{
					document.getElementById("container").style.height = "750px";
				}
				B_SetupCamera_Flag = false;
				var LoadCamerareqrest = new ROSLIB.ServiceRequest({
					Load: true
				});
				CameraInfoClient.callService(LoadCamerareqrest, function (LoadCameraresult) {
					CamBrightnessValue = LoadCameraresult.brightness;
					CamContrastValue = LoadCameraresult.contrast;
					CamSaturationValue = LoadCameraresult.saturation;
					CamSharpnessValue = LoadCameraresult.sharpness;
					CamWhiteBalanceValue = LoadCameraresult.white_balance;
					CamExposureValue = LoadCameraresult.exposure;
					CamAuto_ExposureValue = LoadCameraresult.auto_exposure;
					CamAuto_WhiteBalanceValue = LoadCameraresult.auto_white_balance;
					CamAuto_BacklightCompensationValue = LoadCameraresult.auto_Backlight_Compensation;

					document.getElementById("AutoWhitBlance").checked = CamAuto_WhiteBalanceValue;
					CameraMsg.auto_white_balance = document.getElementById("AutoWhitBlance").checked = CamAuto_WhiteBalanceValue;

					document.getElementById("AutoExposure").checked = CamAuto_ExposureValue;
					CameraMsg.auto_exposure = document.getElementById("AutoExposure").checked = CamAuto_ExposureValue;

					document.getElementById("AutoBacklightCompensation").checked = CamAuto_BacklightCompensationValue;
					CameraMsg.auto_Backlight_Compensation = document.getElementById("AutoBacklightCompensation").checked = CamAuto_BacklightCompensationValue;

					document.getElementById("CamBrightness").value = CamBrightnessValue;
					document.getElementById("CamBrightnessValue").value = CamBrightnessValue;
					document.getElementById("CamContrast").value = CamContrastValue;
					document.getElementById("CamContrastValue").value = CamContrastValue;
					document.getElementById("CamSaturation").value = CamSaturationValue;
					document.getElementById("CamSaturationValue").value = CamSaturationValue;
					document.getElementById("CamWhiteBalance").value = CamWhiteBalanceValue;
					document.getElementById("CamWhiteBalanceValue").value = CamWhiteBalanceValue;

					CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
					CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
					CameraMsg.auto_exposure = CamAuto_ExposureValue;
					CameraMsg.brightness = Number(CamBrightnessValue);
					CameraMsg.contrast = Number(CamContrastValue);
					CameraMsg.saturation = Number(CamSaturationValue);
					CameraMsg.white_balance = Number(CamWhiteBalanceValue);
					Camera.publish(CameraMsg);
				});
			} else {
				document.getElementById("Camera").style.display = "none";
				document.getElementById("select").style.height = "400px";
				if(B_ShowDebugForm_Flag){
					document.getElementById("container").style.height = "550px";
				}else
				{
					document.getElementById("container").style.height = "650px";
				}
				B_SetupCamera_Flag = true;
			}
		}
		function Debug()
		{
			if(B_Debug_Flag)
			{
				document.getElementById("vision1").style.display = "inline";				
				B_Debug_Flag = false;
			}else
			{
				document.getElementById("vision1").style.display = "none";
				B_Debug_Flag = true;
			}
		}
		
		function ShowMaskImage()
		{
			if(B_Blur_Flag)
			{
				document.getElementById("div_mask_image").style.display = "inline";
				document.getElementById("vision1").style.height = "900px";
				B_Blur_Flag = false;
			}else
			{
				document.getElementById("div_mask_image").style.display = "none";
				document.getElementById("vision1").style.height = "900px";
				B_Blur_Flag = true;
			}
		}

		function ShowGammaImage()
		{
			if(B_ImageGamma_Flag)
			{
				document.getElementById("div_imagegamma_image").style.display = "inline";
				document.getElementById("vision1").style.height = "900px";
				B_ImageGamma_Flag = false;
			}else
			{
				document.getElementById("div_imagegamma_image").style.display = "none";
				document.getElementById("vision1").style.height = "900px";
				B_ImageGamma_Flag = true;
			}
		}
		function ShowMerhoughImage()
		{
			if(B_Merhough_Flag)
			{
				document.getElementById("div_merhough_image").style.display = "inline";
				document.getElementById("vision1").style.height = "900px";
				B_Merhough_Flag = false;
			}else
			{
				document.getElementById("div_merhough_image").style.display = "none";
				document.getElementById("vision1").style.height = "900px";
				B_Merhough_Flag = true;
			}
		}
		function ShowMeasureImage()
		{
			if(B_Measure_Flag)
			{
				document.getElementById("object_image").src = "http://localhost:8080/stream?topic=/vision/measure_image";
				B_Measure_Flag = false;
			}
			else
			{
				document.getElementById("object_image").src = "http://localhost:8080/stream?topic=/vision/object_image";
				B_Measure_Flag = true;
			}
		}
		function showCamBrightness(newValue) {
			document.getElementById("CamBrightnessValue").value = newValue;
			CamBrightnessValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);
		}
		function rangeCamBrightnessValue(newValue) {
			document.getElementById("CamBrightness").value = newValue;
			CamBrightnessValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);
		}
		function showCamContrast(newValue) {
			document.getElementById("CamContrastValue").value = newValue;
			CamContrastValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);

		}
		function rangeCamContrastValue(newValue) {
			document.getElementById("CamContrast").value = newValue;
			CamContrastValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);
		}
		function showCamSaturation(newValue) {
			document.getElementById("CamSaturationValue").value = newValue;
			CamSaturationValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);

		}
		function rangeCamSaturationValue(newValue) {
			document.getElementById("CamSaturation").value = newValue;
			CamSaturationValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);
		}
		function showCamWhiteBalance(newValue) {
			document.getElementById("CamWhiteBalanceValue").value = newValue;
			CamWhiteBalanceValue = newValue;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);

		}
		function rangeCamWhiteBalanceValue(newValue) {
			document.getElementById("CamWhiteBalance").value = newValue;
			CamWhiteBalanceValue = newValu70e;
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);
			Camera.publish(CameraMsg);
		}
		function changeAutoWhitBlance() {
			if (document.getElementById("AutoWhitBlance").checked) {
				CamAuto_WhiteBalanceValue = true;
			}
			else {
				CamAuto_WhiteBalanceValue = false;
			}
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);

			Camera.publish(CameraMsg);
		}
		function changeAutoExposure() {
			if (document.getElementById("AutoExposure").checked) {
				CamAuto_ExposureValue = true;
			}
			else {
				CamAuto_ExposureValue = false;
			}
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);

			Camera.publish(CameraMsg);
		}
		function changeAutoBacklightCompensation() {
			if (document.getElementById("AutoBacklightCompensation").checked) {
				CamAuto_BacklightCompensationValue = true;
			}
			else {
				CamAuto_BacklightCompensationValue = false;
			}
			CameraMsg.auto_Backlight_Compensation = CamAuto_BacklightCompensationValue
			CameraMsg.auto_white_balance = CamAuto_WhiteBalanceValue;
			CameraMsg.auto_exposure = CamAuto_ExposureValue;
			CameraMsg.brightness = Number(CamBrightnessValue);
			CameraMsg.contrast = Number(CamContrastValue);
			CameraMsg.saturation = Number(CamSaturationValue);
			CameraMsg.white_balance = Number(CamWhiteBalanceValue);

			Camera.publish(CameraMsg);
		}
		function WebStart() {
			if (B_Start_Flag) {
				document.getElementById("B_Start").value = "Finsh";
				// changeColorLabel(document.getElementById("ColorLabel").value);
				B_Start_Flag = false;
				WebStartcmd.data = true;
				WebStart_Topic.publish(WebStartcmd);
			} else {
				document.getElementById("B_Start").value = "Start";
				B_Start_Flag = true;
				WebStartcmd.data = false;
				WebStart_Topic.publish(WebStartcmd);
			}
		}
		function showHorizontalPosition(newValue) {
			document.getElementById("HorizontalPositionValue").value = newValue;
			HeadPackagecmd.ID = Number(1);
			HeadPackagecmd.Position = Number(document.getElementById("HorizontalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("HorizontalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);
		}

		function rangeHorizontalPosition(newValue) {
			document.getElementById("HorizontalPositionValue").value = newValue;
			HeadPackagecmd.ID = Number(1);
			HeadPackagecmd.Position = Number(document.getElementById("HorizontalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("HorizontalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);
		}
		function showHorizontalSpeed(newValue) {
			document.getElementById("HorizontalSpeedValue").value = newValue;
			HeadPackagecmd.ID = Number(1);
			HeadPackagecmd.Position = Number(document.getElementById("HorizontalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("HorizontalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);
		}

		function rangeHorizontalSpeed(newValue) {
			document.getElementById("HorizontalSpeedValue").value = newValue;
			HeadPackagecmd.ID = Number(1);
			HeadPackagecmd.Position = Number(document.getElementById("HorizontalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("HorizontalSpeedValue").valutde);
			Head_Topic.publish(HeadPackagecmd);
		}
		function showVerticalPosition(newValue) {
			document.getElementById("VerticalPositionValue").value = newValue;
			HeadPackagecmd.ID = Number(2);
			HeadPackagecmd.Position = Number(document.getElementById("VerticalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("VerticalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);
		}

		function rangeVerticalPosition(newValue) {
			document.getElementById("VerticalPositionValue").value = newValue;
			HeadPackagecmd.ID = Number(2);
			HeadPackagecmd.Position = Number(document.getElementById("VerticalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("VerticalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);
		}
		function showVerticalSpeed(newValue) {
			document.getElementById("VerticalSpeedValue").value = newValue;
			HeadPackagecmd.ID = Number(2);
			HeadPackagecmd.Position = Number(document.getElementById("VerticalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("VerticalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);

		}

		function rangeVerticalSpeed(newValue) {
			document.getElementById("VerticalSpeedValue").value = newValue;
			HeadPackagecmd.ID = Number(2);
			HeadPackagecmd.Position = Number(document.getElementById("VerticalPositionValue").value);
			HeadPackagecmd.Speed = Number(document.getElementById("VerticalSpeedValue").value);
			Head_Topic.publish(HeadPackagecmd);
		}
		function changeCamera() {
			var CameraId_msg = new ROSLIB.Message({
				data: 0
			});
			CameraId_msg.data = Number(document.getElementById("Camera_Select").value);
			CameraId_Topic.publish(CameraId_msg);
		}

	</script>
	<style type="text/css">
		body {
			width: 1820px;
			height: 1000px;
			overflow: visible;
			background-image: url(picture/Background.jpg);
			background-size: cover;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		}

		#container {
			background-color: #333;
			border: 2px black solid;
			width: 800px;
			height: 550px;
			margin: 20px 0px 0px 20px;
			float: left;
			overflow: visible;
			color: white;
		}

		#vision1 {
			background-color: #333;
			border: 2px black solid;
			width: 780px;
			height: 400px;
			margin: 20px 50px 0px 50px;
			float: right;
			overflow: visible;
			color: white;
			display: none;
		}

		#div_mask_image {
			width: 640px;
			height: 240px;
			border: 1px #FFF solid;
			margin: 25px 32px 24px 32px;
			float: left;
			display: none;
		}

		#div_imagegamma_image {
			width: 640px;
			height: 240px;
			border: 1px #FFF solid;
			margin: 25px 32px 24px 32px;
			float: left;
			display: none;
		}

		#div_merhough_image {
			width: 640px;
			height: 240px;
			border: 1px #FFF solid;
			margin: 25px 32px 24px 32px;
			float: left;
			display: none;
		}


		#div_object_image {
			width: 320px;
			height: 240px;
			border: 1px #FFF solid;
			margin: 25px 32px 24px 32px;
			float: left;
			display: inline;
		}

		#div_monitor_image {
			width: 320px;
			height: 240px;
			border: 1px #FFF solid;
			margin: 25px 32px 24px 32px;
			float: left;
			display: inline;
		}

		#select {
			width: 320px;
			height: 250px;
			margin: 5px 32px 0px 27px;
			float: left;
			display: inline;
		}

		#header {
			text-align: center;
			color: #FFFFFF;
			margin-top: 13px;
		}

		.text {
			margin: 1px 1px 1px 5px;
			font-size: 12px;
		}

		.ValueText {
			width: 38px;
			height: 20px;
		}

		.Range {
			width: 225px;
			height: 10px;
			margin: 6px 2px 6px 2px;

		}

		#B_DebugForm {
			width: 150px;
		}

		#Camera {
			display: none;
		}

		#B_Start {
			width: 50px;
		}

		#Debug_Range {
			width: 320px;
			height: 300px;
			border: 1px #FFF solid;
			margin: 20px 60px 0px 0px;
			float: right;
			display: none;
		}

	</style>
	<title>HumanoidInterface</title>
</head>

<body>
	<!-- NAV BAR -->
	<ul>
		<li><a target="_blank" class="navbarright" href="WalkingInterface.html">Walking Interface</a></li>
		<li><a target="_blank" style="text-decoration: underline;" class="navbarright" href="ImageProcessInterface.html">Humanoid Interface</a></li>
		<li><a target="_blank" class="navbarright" href="MotionControlInterface.html">Motion Controller</a></li>
		<li><a target="_blank" class="navbarright" href="index.html">Home</a></li>
		<li class="logo">
			<a target="_blank" href="index.html" class="logo"><img id="logoimg" src="./resources/TKU_ICLab/iclablogo-02.png"></a>
		</li>
	</ul>
	<br />
	<p id="connected" style="color:#00D600; display:none; font-size: 20px;">
		Connected
	</p>
	<form>
		<div id="head" align="center">
			<h1 id="header">Humanoid Interface</h1>
		</div>
		<div id="container" align="left">
			<div id="div_object_image">
				<img id="object_image" style="-webkit-user-select: none; display:inline;" src="http://localhost:8080/stream?topic=/vision/object_image">
			</div>
			<div id="div_monitor_image">
				<img id="monitor_image" style="-webkit-user-select: none; display:inline;" src="http://localhost:8080/stream?topic=/vision/monitor_image">

			</div>
			<div id="Debug_Range">
				<table width="320">
					<tr>
						<td colspan="3">
							<p class="text">Blue threshold:</p>
						</td>
					</tr>
					<tr>
						<td width="25"></td>
						<td><input class="Range" id="Blue" name="Blue" type="range" min="0" max="255" value="220" oninput="showBlueValue(this.value)" /></td>
						<td><input type="text" class="ValueText" id="BlueValue" size="12" value="220" onchange="rangeBlueValue(this.value)" /></td>
					</tr>
					<tr>
						<td colspan="3">
							<p class="text">Green threshold:</p>
						</td>
					</tr>
					<tr>
						<td width="25"></td>
						<td><input class="Range" id="Green" name="Green" type="range" min="0" max="255" value="220" oninput="showGreenValue(this.value)" /></td>
						<td><input type="text" class="ValueText" id="GreenValue" size="12" value="220" onchange="rangeGreenValue(this.value)" /></td>
					</tr>
					<tr>
						<td colspan="3">
							<p class="text">Red threshold:</p>
						</td>
					</tr>
					<tr>
						<td width="25"></td>
						<td><input class="Range" id="Red" name="Red" type="range" min="0" max="255" value="150" oninput="showRedValue(this.value)" /></td>
						<td><input type="text" class="ValueText" id="RedValue" size="12" value="150" onchange="rangeRedValue(this.value)" /></td>
					</tr>
				</table>
				<table width="320">
					<tr>
						<td colspan="3">
							<p class="text">Hough threshold:</p>
						</td>
					</tr>
					<tr>
						<td width="25"></td>
						<td><input class="Range" id="Threshold" name="Threshold" type="range" min="0" max="300" value="100" oninput="showthresholdValue(this.value)" /></td>
						<td><input type="text" class="ValueText" id="ThresholdValue" size="12" value="100" onchange="rangethresholdValue(this.value)" /></td>
					</tr>
					<tr>
						<td colspan="3">
							<p class="text">Hough minLineLength:</p>
						</td>
					</tr>
					<tr>
						<td width="25"></td>
						<td><input class="Range" id="MinLineLength" name="MinLineLength" type="range" min="0" max="200" value="60" oninput="showminLineLength(this.value)" /></td>
						<td><input type="text" class="ValueText" id="MinLineLengthValue" size="12" value="60" onchange="rangesminLineLength(this.value)" /></td>
					</tr>
					<tr>
						<td colspan="3">
							<p class="text">Hough maxLineGap:</p>
						</td>
					</tr>
					<tr>
						<td width="25"></td>
						<td><input class="Range" id="MaxLineGap" name="MaxLineGap" type="range" min="0" max="100" value="40" oninput="showmaxLineGap(this.value)" /></td>
						<td><input type="text" class="ValueText" id="MaxLineGapValue" size="12" value="40" onchange="rangemaxLineGap(this.value)" /></td>
					</tr>
				</table>
			</div>

			<div id="select">
				<div>
					<table width="320">
						<tr>
							<td>
								<input style="margin-left: 1px; height:25px;width:38px;padding-left:3px" type="button" class="Button" id="B_Start" value="Start" 
								 onClick="WebStart()"></input>
							</td>
							<td>
								<input style="margin-left: 1px; height:25px;width:115px;padding-left:2px" type="button" class="Button" id="B_DebugForm" value="Show Debug Form"
								 onClick="ShowDebugForm()"></input>
							</td>
							<td>
								<input style="margin-left: 1px; height:25px;width:93px;padding-left:2px" type="button" class="Button" id="B_Camera" value="Camera Setup"
								 onClick="CameraSetUp()"></input>
							</td>
							<td>
								<input style="margin-left: 1px; height:25px;width:60px;padding-left:3px" type="button" class="Button" id="B_Measure" value="Measure" 
								 onClick="ShowMeasureImage()"></input>
							</td>
							
						</tr>
					</table>
				</div>
				<div>
					<table width="320">
						<tr>
							<td>
								<input style="margin-left: 1px; height:25px;width:50px;padding-left:2px" type="button" class="Button" id="B_Debug" value="Debug"
								 onClick="Debug()"></input>
							</td>
						<tr>
							<td colspan="3">
								<p class="text" style="font-size: 15px;">Horizontal:</p>
							</td>
						</tr>
						<tr>
							<td rowspan="2"><input type="text" class="ValueText" id="HorizontalPositionValue" size="12" value="2048" onchange="rangeHorizontalPosition(this.value)" /></td>
							<td><input class="Range" id="HorizontalPositionRange" name="HorizontalPositionRange" type="range" min="0" max="4095" value="2048" oninput="showHorizontalPosition(this.value)"/></td>
							<td rowspan="2"><input type="text" class="ValueText" id="HorizontalSpeedValue" size="12" value="1" onchange="rangeHorizontalSpeed(this.value)" /></td>
						</tr>
						<tr>
							<td><input class="Range" id="HorizontalSpeedRange" name="HorizontalSpeedRange" type="range" min="1" max="9999"
								 value="1" oninput="showHorizontalSpeed(this.value)"/></td>
						</tr>
						<tr>
							<td colspan="3">
								<p class="text" style="font-size: 15px;">Vertical:</p>
							</td>
						</tr>
						<tr>
							<td rowspan="2"><input type="text" class="ValueText" id="VerticalPositionValue" size="12" value="2048" onchange="rangeVerticalPosition(this.value)" /></td>
							<td><input class="Range" id="VerticalPositionRange" name="VerticalPositionRange" type="range" min="0" max="4095"
								 value="2048" oninput="showVerticalPosition(this.value)" /></td>
							<td rowspan="2"><input type="text" class="ValueText" id="VerticalSpeedValue" size="12" value="1" onchange="rangeVerticalSpeed(this.value)" /></td>
						</tr>
						<tr>
							<td><input class="Range" id="VerticalSpeedRange" name="VerticalSpeedRange" type="range" min="1" max="9999" value="1"
								 oninput="showVerticalSpeed(this.value)" /></td>
						</tr>
					</table>
				</div>
				<div id="Camera">
					<div style="float:left; margin-left:8px;">
						<input type="checkbox" name="AutoWhitBlance" id="AutoWhitBlance" onclick="changeAutoWhitBlance()">Auto
						White_blance
					</div>
					<div style="float:right; margin-right:12px;">
						<input type="checkbox" name="AutoExposure" id="AutoExposure" onclick="changeAutoExposure()">Auto Exposure
					</div>
					<div style="float:left; margin-left:8px;">
						<input type="checkbox" name="AutoBacklightCompensation" id="AutoBacklightCompensation" onclick="changeAutoBacklightCompensation()">Auto
						Backlight Compensation
					</div>
					<table width="320">
						<tr>
							<td colspan="3">
								<p class="text">Camera Brightness:</p>
							</td>
						</tr>
						<tr>
							<td width="25"></td>
							<td><input class="Range" id="CamBrightness" name="CamBrightness" type="range" min="-64" max="64" value="0" oninput="showCamBrightness(this.value)" /></td>
							<td><input type="text" class="ValueText" id="CamBrightnessValue" size="12" value="50" onchange="rangeCamBrightnessValue(this.value)" /></td>
						</tr>
						<tr>
							<td colspan="3">
								<p class="text">Camera Contras:</p>
							</td>
						</tr>
						<tr>
							<td width="25"></td>
							<td><input class="Range" id="CamContrast" name="CamContrast" type="range" min="0" max="100" value="50" oninput="showCamContrast(this.value)" /></td>
							<td><input type="text" class="ValueText" id="CamContrastValue" size="12" value="50" onchange="rangeCamContrastValue(this.value)" /></td>
						</tr>
						<tr>
							<td colspan="3">
								<p class="text">Camera Saturation:</p>
							</td>
						</tr>
						<tr>
							<td width="25"></td>
							<td><input class="Range" id="CamSaturation" name="CamSaturation" type="range" min="0" max="100" value="50" oninput="showCamSaturation(this.value)" /></td>
							<td><input type="text" class="ValueText" id="CamSaturationValue" size="12" value="50" onchange="rangeCamSaturationValue(this.value)" /></td>
						</tr>
						<tr>
							<td colspan="3">
								<p class="text">Camera WhiteBalance:</p>
							</td>
						</tr>
						<tr>
							<td width="25"></td>
							<td><input class="Range" id="CamWhiteBalance" name="CamWhiteBalance" type="range" min="2800" max="6500" value="4000" oninput="showCamWhiteBalance(this.value)" /></td>
							<td><input type="text" class="ValueText" id="CamWhiteBalanceValue" size="12" value="4000" onchange="rangeCamWhiteBalanceValue(this.value)" /></td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</form>
	<form>
		<div id="vision1" align="center">
			<div>
				<table width="320">
					<tr>
						<td>
							<input style="margin-left: 1px; height:25px;width:93px;padding-left:2px" type="button" class="Button" id="mask_image" value="Blur Image"
							onClick="ShowMaskImage()"></input>
						</td>
						<td>
							<input style="margin-left: 1px; height:25px;width:93px;padding-left:2px" type="button" class="Button" id="imagegamma_image" value="Gamma Image"
							onClick="ShowGammaImage()"></input>
						</td>
						<td>
							<input style="margin-left: 1px; height:25px;width:93px;padding-left:2px" type="button" class="Button" id="merhough_image" value="MHough Image"
							onClick="ShowMerhoughImage()"></input>
						</td>
					</tr>
				</table>
			</div>
			<div id="div_mask_image">
				<img id="mask_image" style="-webkit-user-select: none; display:inline;" src="http://localhost:8080/stream?topic=/vision/mask_image">
			</div>
			<div id="div_imagegamma_image">
				<img id="imagegamma_image" style="-webkit-user-select: none; display:inline;" src="http://localhost:8080/stream?topic=/vision/Gamma_image">
			</div>
			<div id="div_merhough_image">
				<img id="merhough_image" style="-webkit-user-select: none; display:inline;" src="http://localhost:8080/stream?topic=/vision/merhough_image">
			</div>
		</div>					
	</form>
</body>

</html>